From c03d5cdff8dded22cf0a6f2b17bab3d284bc47d6 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey.doherty@intel.com>
Date: Tue, 1 Jan 2019 14:46:22 +0000
Subject: [linux-steam-integration 19/31] mkgobuildy: Clean up and reorganise

Signed-off-by: Ikey Doherty <ikey.doherty@intel.com>
---
 mkgobuildy.sh | 20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

diff --git a/mkgobuildy.sh b/mkgobuildy.sh
index ffe19f0..dd767a5 100755
--- a/mkgobuildy.sh
+++ b/mkgobuildy.sh
@@ -1,13 +1,29 @@
 #!/bin/bash
 set -e
 
+DEFAULT_ARGS="-Dwith-libressl-mode=shim -Dwith-new-libcxx-abi=true"
+
 if [[ ! -d buildroot/build32 ]]; then
     ASFLAGS="$ASFLAGS --32" CFLAGS="$CFLAGS -m32" CXXFLAGS="$CXXFLAGS -m32" LDFLAGS="$LDFLAGS -m32" \
-    meson buildroot/build32 -Dwith-libressl-mode=shim --prefix=/usr --sysconfdir=/etc --datadir=/usr/share --libdir=/usr/lib32 -Dwith-shim=none -Dwith-new-libcxx-abi=true --buildtype debugoptimized
+    meson buildroot/build32 $DEFAULT_ARGS \
+        --prefix=/usr \
+        --sysconfdir=/etc \
+        --datadir=/usr/share \
+        --libdir=/usr/lib32 \
+        -Dwith-shim=none \
+        --buildtype debugoptimized
 fi
 
 if [[ ! -d buildroot/build64 ]]; then
-    meson buildroot/build64 -Dwith-libressl-mode=shim --prefix=/usr --sysconfdir=/etc --datadir=/usr/share --libdir=/usr/lib64 -Dwith-shim=replacement -Dwith-steam-binary=/usr/lib64/steam/steam -Dwith-frontend=true -Dwith-new-libcxx-abi=true --buildtype debugoptimized
+    meson buildroot/build64 $DEFAULT_ARGS \
+        --prefix=/usr \
+        --sysconfdir=/etc \
+        --datadir=/usr/share \
+        --libdir=/usr/lib64 \
+        -Dwith-shim=replacement \
+        -Dwith-steam-binary=/usr/lib64/steam/steam \
+        -Dwith-frontend=true \
+        --buildtype debugoptimized
 fi
 
 ninja -C buildroot/build32
-- 
2.20.0

